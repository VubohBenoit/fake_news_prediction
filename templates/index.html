{% extends "base.html" %}
{% block content %}

<section class="hero">
    <div class="hero-text">
        <h2>Liste des news enregistr√©es</h2>
        <p>
            Statut du mod√®le ML :
            {% if model_ready %}
                <span class="badge badge-ok">‚úÖ Mod√®le pr√™t</span>
            {% else %}
                <span class="badge badge-warn">‚è≥ Entra√Ænement en cours‚Ä¶</span>
            {% endif %}
        </p>
    </div>
    <div style="display:flex;gap:0.75rem;flex-wrap:wrap;">
        {% if model_ready %}
        <a href="{{ url_for('predict_all') }}" class="btn btn-predict">ü§ñ Tout pr√©dire</a>
        {% endif %}
        <a href="{{ url_for('add_news') }}" class="btn btn-primary">‚ûï Ajouter une news</a>
    </div>
</section>

{% if news_list %}
<div class="table-wrapper">
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th>Titre</th>
                <th>Source</th>
                <th>Label humain</th>
                <th>Pr√©diction ML</th>
                <th>Date</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for news in news_list %}
            <tr>
                <td>{{ news['id'] }}</td>
                <td class="news-title">{{ news['title'] }}</td>
                <td>
                    {% if news['source'] %}
                        <a href="{{ news['source'] }}" target="_blank" rel="noopener">üîó lien</a>
                    {% else %}
                        <em>‚Äî</em>
                    {% endif %}
                </td>
                <td>
                    <span class="badge badge-{{ 'ok' if news['label'] == 'real' else 'danger' }}">
                        {{ '‚úÖ V√©rifi√©e' if news['label'] == 'real' else '‚ùå Fausse' }}
                    </span>
                </td>
                <td>
                    {% if news['predicted'] %}
                        <span class="badge badge-{{ 'ok' if news['predicted'] == 'real' else 'danger' }}">
                            {{ '‚úÖ real' if news['predicted'] == 'real' else '‚ùå fake' }}
                        </span>
                    {% else %}
                        <em>‚Äî</em>
                    {% endif %}
                </td>
                <td>{{ news['created'][:10] }}</td>
                <td>
                    {% if model_ready %}
                        <a href="{{ url_for('predict_single', news_id=news['id']) }}" class="btn btn-sm">Pr√©dire</a>
                    {% else %}
                        <span class="muted">N/A</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p class="empty">Aucune news enregistr√©e pour l'instant.</p>
{% endif %}

{% endblock %}